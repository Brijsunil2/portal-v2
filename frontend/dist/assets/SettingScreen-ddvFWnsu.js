import{k as X,r,u as v,j as e,c as f,A as Ue,i as Be,l as Te,m as Ae,n as Z,o as Le,p as De,q as J,t as He,v as Oe,F as Y,w as ze,x as We,y as Ge,z as qe,b as Ve,g as _e,D as Ke,C as P,R,e as k,B as Ze,S as Je,s as Qe}from"./index-rjsEL-S0.js";import{c as Xe,a as E,F as o,f as Ye}from"./index.esm-toxatSzD.js";var F;function Q(a){if((!F&&F!==0||a)&&X){var s=document.createElement("div");s.style.position="absolute",s.style.top="-9999px",s.style.width="50px",s.style.height="50px",s.style.overflow="scroll",document.body.appendChild(s),F=s.offsetWidth-s.clientWidth,document.body.removeChild(s)}return F}const ee=r.forwardRef(({className:a,bsPrefix:s,as:l="div",...d},i)=>(s=v(s,"modal-body"),e.jsx(l,{ref:i,className:f(a,s),...d})));ee.displayName="ModalBody";const Pe=ee,ae=r.forwardRef(({bsPrefix:a,className:s,contentClassName:l,centered:d,size:i,fullscreen:m,children:M,scrollable:N,...S},g)=>{a=v(a,"modal");const y=`${a}-dialog`,h=typeof m=="string"?`${a}-fullscreen-${m}`:`${a}-fullscreen`;return e.jsx("div",{...S,ref:g,className:f(y,s,i&&`${a}-${i}`,d&&`${y}-centered`,N&&`${y}-scrollable`,m&&h),children:e.jsx("div",{className:f(`${a}-content`,l),children:M})})});ae.displayName="ModalDialog";const se=ae,ne=r.forwardRef(({className:a,bsPrefix:s,as:l="div",...d},i)=>(s=v(s,"modal-footer"),e.jsx(l,{ref:i,className:f(a,s),...d})));ne.displayName="ModalFooter";const ea=ne,te=r.forwardRef(({bsPrefix:a,className:s,closeLabel:l="Close",closeButton:d=!1,...i},m)=>(a=v(a,"modal-header"),e.jsx(Ue,{ref:m,...i,className:f(s,a),closeLabel:l,closeButton:d})));te.displayName="ModalHeader";const aa=te,sa=Be("h4"),oe=r.forwardRef(({className:a,bsPrefix:s,as:l=sa,...d},i)=>(s=v(s,"modal-title"),e.jsx(l,{ref:i,className:f(a,s),...d})));oe.displayName="ModalTitle";const na=oe;function ta(a){return e.jsx(Y,{...a,timeout:null})}function oa(a){return e.jsx(Y,{...a,timeout:null})}const re=r.forwardRef(({bsPrefix:a,className:s,style:l,dialogClassName:d,contentClassName:i,children:m,dialogAs:M=se,"aria-labelledby":N,"aria-describedby":S,"aria-label":g,show:y=!1,animation:h=!0,backdrop:j=!0,keyboard:p=!0,onEscapeKeyDown:u,onShow:c,onHide:t,container:x,autoFocus:le=!0,enforceFocus:de=!0,restoreFocus:ie=!0,restoreFocusOptions:ce,onEntered:ue,onExit:T,onExiting:me,onEnter:A,onEntering:L,onExited:D,backdropClassName:H,manager:O,...he},pe)=>{const[fe,ge]=r.useState({}),[ye,z]=r.useState(!1),$=r.useRef(!1),I=r.useRef(!1),b=r.useRef(null),[C,je]=Te(),xe=Ae(pe,je),W=Z(t),we=Le();a=v(a,"modal");const ve=r.useMemo(()=>({onHide:W}),[W]);function G(){return O||ze({isRTL:we})}function q(n){if(!X)return;const w=G().getScrollbarWidth()>0,K=n.scrollHeight>Ge(n).documentElement.clientHeight;ge({paddingRight:w&&!K?Q():void 0,paddingLeft:!w&&K?Q():void 0})}const U=Z(()=>{C&&q(C.dialog)});De(()=>{J(window,"resize",U),b.current==null||b.current()});const Me=()=>{$.current=!0},Ne=n=>{$.current&&C&&n.target===C.dialog&&(I.current=!0),$.current=!1},V=()=>{z(!0),b.current=qe(C.dialog,()=>{z(!1)})},Se=n=>{n.target===n.currentTarget&&V()},be=n=>{if(j==="static"){Se(n);return}if(I.current||n.target!==n.currentTarget){I.current=!1;return}t==null||t()},Ce=n=>{p?u==null||u(n):(n.preventDefault(),j==="static"&&V())},Re=(n,w)=>{n&&q(n),A==null||A(n,w)},ke=n=>{b.current==null||b.current(),T==null||T(n)},Ee=(n,w)=>{L==null||L(n,w),We(window,"resize",U)},Fe=n=>{n&&(n.style.display=""),D==null||D(n),J(window,"resize",U)},$e=r.useCallback(n=>e.jsx("div",{...n,className:f(`${a}-backdrop`,H,!h&&"show")}),[h,H,a]),_={...l,...fe};_.display="block";const Ie=n=>e.jsx("div",{role:"dialog",...n,style:_,className:f(s,a,ye&&`${a}-static`,!h&&"show"),onClick:j?be:void 0,onMouseUp:Ne,"aria-label":g,"aria-labelledby":N,"aria-describedby":S,children:e.jsx(M,{...he,onMouseDown:Me,className:d,contentClassName:i,children:m})});return e.jsx(He.Provider,{value:ve,children:e.jsx(Oe,{show:y,ref:xe,backdrop:j,container:x,keyboard:!0,autoFocus:le,enforceFocus:de,restoreFocus:ie,restoreFocusOptions:ce,onEscapeKeyDown:Ce,onShow:c,onHide:t,onEnter:Re,onEntering:Ee,onEntered:ue,onExit:ke,onExiting:me,onExited:Fe,manager:G(),transition:h?ta:void 0,backdropTransition:h?oa:void 0,renderBackdrop:$e,renderDialog:Ie})})});re.displayName="Modal";const B=Object.assign(re,{Body:Pe,Header:aa,Title:na,Footer:ea,Dialog:se,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150}),ra=()=>{const[a,s]=r.useState(!0),[l,d]=r.useState(!0),[i,m]=r.useState(!1),{Formik:M}=Ye,N=Xe().shape({name:E().required(),username:E().required().min(5),email:E().required().email(),password:E(),confirmPassword:E()}),S=Ve(),{userInfo:g}=_e(p=>p.auth),[y,{isLoading:h}]=Ke(),j=async p=>{var u,c;s(!0),d(!0);try{const t=await y(p).unwrap();S(Qe({...t})),m(!0)}catch(t){if(t.status===400)switch(t.data.message){case"Email already exists":d(!1);break;case"Username already exists":s(!1);break;default:console.log(((u=t==null?void 0:t.data)==null?void 0:u.message)||t.error)}else console.log(((c=t==null?void 0:t.data)==null?void 0:c.message)||t.error)}};return e.jsxs(P,{className:"accountinfo-container",children:[e.jsx("h3",{children:"Account Information"}),e.jsx(M,{validationSchema:N,onSubmit:p=>j(p),initialValues:{name:g.name,username:g.username,email:g.email,password:"",confirmPassword:""},children:({handleSubmit:p,handleChange:u,values:c,touched:t,errors:x})=>e.jsxs(o,{noValidate:!0,onSubmit:p,children:[e.jsx(R,{className:"mb-3",children:e.jsxs(o.Group,{as:k,children:[e.jsx(o.Label,{children:"Name"}),e.jsx(o.Control,{type:"text",placeholder:"Name",name:"name",value:c.name,onChange:u,isInvalid:x.name&&t.name}),e.jsx(o.Control.Feedback,{type:"invalid",children:"Please provide your name"})]})}),e.jsx(R,{className:"mb-3",children:e.jsxs(o.Group,{as:k,children:[e.jsx(o.Label,{children:"Username"}),e.jsx(o.Control,{type:"text",placeholder:"Username",name:"username",minLength:"5",maxLength:"20",value:c.username,onChange:u,isInvalid:(x.username||!a)&&t.username}),e.jsx(o.Control.Feedback,{type:"invalid",children:a?"Username must be a minimum of 5 characters long":"Username already exists"})]})}),e.jsx(R,{className:"mb-3",children:e.jsxs(o.Group,{as:k,children:[e.jsx(o.Label,{children:"Email"}),e.jsx(o.Control,{type:"email",placeholder:"Email",name:"email",value:c.email,onChange:u,isInvalid:(x.email||!l)&&t.email}),e.jsx(o.Control.Feedback,{type:"invalid",children:l?"Please provide a valid email":"Email already exists"})]})}),e.jsx(R,{className:"mb-3",children:e.jsxs(o.Group,{as:k,children:[e.jsx(o.Label,{children:"Password"}),e.jsx(o.Control,{type:"password",placeholder:"Password",name:"password",pattern:"(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,}",value:c.password,onChange:u,isInvalid:x.password&&t.password}),e.jsx(o.Control.Feedback,{type:"invalid",children:"Password must have at least one lowercase, one uppercase, a number and at least 8 characters long"})]})}),e.jsx(R,{className:"mb-3",children:e.jsxs(o.Group,{as:k,children:[e.jsx(o.Label,{children:"Retype Password"}),e.jsx(o.Control,{type:"password",placeholder:"Retype Password",value:c.confirmPassword,name:"confirmPassword",onChange:u,isInvalid:c.password!==c.confirmPassword&&t.confirmPassword}),e.jsx(o.Control.Feedback,{type:"invalid",children:"Passwords must match"})]})}),e.jsxs(B,{size:"sm",show:i,onHide:()=>m(!1),"aria-labelledby":"success-modal",centered:!0,children:[e.jsx(B.Header,{closeButton:!0,children:"Success!"}),e.jsx(B.Body,{style:{color:"green"},children:"Account Information Updated"})]}),e.jsx(Ze,{type:"submit",children:h?e.jsx(Je,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}):"Update"})]})})]})},ia=()=>e.jsx("div",{className:"settingscreen-container",children:e.jsx("div",{className:"primary-container",children:e.jsxs(P,{children:[e.jsx("h2",{children:"Settings"}),e.jsx(ra,{})]})})});export{ia as default};
